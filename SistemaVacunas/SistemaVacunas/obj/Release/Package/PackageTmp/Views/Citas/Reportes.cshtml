@model List<SistemaVacunas.Models.Citas>
@{
    ViewBag.Title = "Reportes";
    string contenido = "";
    string resultado = "";
    double valor = 0;
    int total = 0;
    double porcentaje = 0.0;
    double totalporcentaje = 0.0;
}


<!-- Cabeza de pagina-->
<div class="full-box page-header">
    <h3 class="text-lg-center">
        <i class="fas fa-clipboard-list fa-fw"></i>  REPORTES DE CENTRO DE VACUNACION
    </h3>
    <p class="text-justify">

    </p>
</div>

<!--tabla de medicos-->
<table class="table table-bordered" style="width:100%">
    <thead style="background-color:darkkhaki;color:white">
        @*<tr>
            <th>#</th>
            <th>Citas</th>
            <th>Valor</th>
            <th>%</th>
        </tr>*@
    </thead>
    <tbody>
        @foreach (var q in Model)
        {
            total += q.Id_citas.ToString().Count();
        }
        @foreach (var m in Model)
        {
            resultado = m.Lugarvacunacion;
            valor = m.Id_citas.ToString().Count();
            contenido = contenido + "{ name: " + "'" + resultado + "'" + "," + "data: [" + valor + "]" + " },";

            porcentaje = ((valor * 100) / total);
            totalporcentaje += porcentaje;
            @*<tr>
                <th>@(m.Id_citas)</th>
                <th>@(m.Id_paciente)</th>
                <th class="text-left">@(m.Id_citas.ToString().Count())</th>
                <th class="text-left">@Math.Round(@porcentaje, 2)%</th>
            </tr>*@
        }


    </tbody>
</table>

<!-- Tabla de Total de medicos -->
<!--<table class="text-left" style="width:100%">
    <thead style="background-color:darkkhaki;color:white">
        <tr>

            <th class="text-left">Total Vacunados</th>
            <th class="text-left">@total</th>
            <th class="text-left"></th>
            <th class="text-left">@totalporcentaje %</th>
        </tr>
        </body>
</table>-->
<br />
<br />


<!-- Cabeza de Highcharts -->
<figure class="highcharts-figure">
    <div id="container"></div>
    <p class="highcharts-description">
    <p class="text-center">
        EsSalud - Tacna
    </p>

    </p>
</figure>
<!-- Scripts de Highcharts-->
<script type="text/javascript">
    $(function () {
        $(document).ready(function () {
         Highcharts.chart('container', {
    chart: {
        type: 'column',
        options3d: {
            enabled: true,
            alpha: 10,
            beta: 25,
            depth: 70
        }
    },
    title: {
        text: 'Grafico de Criterios por Resultados'
    },
    subtitle: {
        text: 'EsSalud'
    },
    plotOptions: {
        column: {
            depth: 25
        }
    },
    xAxis: {
        categories: ['Cantidad  de Vacunas', Highcharts.getOptions().lang.shortMonths],
        labels: {
            skew3d: true,
            style: {
                fontSize: '16px'
            }
        }
    },
        yAxis: {
        min: 0,
        title: {
            text: 'Cantidad de Lugares'
        }
    },
    series: [@Html.Raw(contenido)]
});
        })
    })
</script>


